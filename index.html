<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Love+Ya+Like+A+Sister&family=Lovers+Quarrel&display=swap"
      rel="stylesheet"
    />
    <!-- <link rel="stylesheet" href="style.css" /> -->
    <title>#OA_IN_LOVE</title>
    <link rel="stylesheet" href="./assets/style.css" />
  </head>
  <body>
    <div id="root"></div>
    <audio id="song" src="./assets/song.mp3"></audio>

    <script>
      const phrases = [
        "Are you sure?",
        "Really Sure😢",
        "I'll be very sad😕",
        "You're the sunshine of my life 💐",
        "Your smile is my favorite 🥰",
        "You make my heart skip a beat 💓",
        "Pookie Please🥺",
        "Don't do this to me🫤",
        "I'm gonna cry...😭",
        "You are breaking my heart😭💔",
        "My world revolves around you 🌍💖",
        "Without you, I'm lost 😭",
        "You’re my everything, don’t say no 🥹",
        "Please don’t break my tiny heart 💔🥺",
        "You're my favorite person in the universe ✨💫",
        "I’ll buy you chocolates 🍫 if you say yes!",
        "I can't imagine life without you 😢",
        "Saying no should be illegal 🚨😤",
        "Pretty please with a cherry on top? 🍒🥺",
        "You’re too cute to say no 😘",
      ];

      let noCount = 0;
      let yesPressed = false;
      let yesButtonSize = 16;

      function handleYesClick() {
        yesPressed = true;
        render();
        const card = document.querySelector(".card_container");
        const song = document.getElementById("song");

        card.addEventListener("mouseover", () => {
          song.play();
        });

        card.addEventListener("mouseleave", () => {
          song.pause();
          song.currentTime = 0; // Restart the song when hovered again
        });
      }

      function handleNoClick() {
        noCount += 1;
        yesButtonSize += 20;
        render();
      }

      function getRandomNumber() {
        let min = 0;
        let max = phrases.length;
        const now = Date.now(); // Get current timestamp in milliseconds
        const nanoTime = performance.now(); // More precise time-based entropy

        // Combine and hash the values to create more randomness
        const seed = (now * nanoTime) % 1_000_000_007; // Large prime number
        const randomFraction = (seed / 1_000_000_007) % 1; // Normalize to [0,1)

        return Math.floor(randomFraction * (max - min)) + min;
      }

      function getNoButtonText() {
        if (noCount === 0) return "No 🙉";
        return phrases[getRandomNumber()];
      }

      function render() {
        const root = document.getElementById("root");

        if (yesPressed) {
          root.innerHTML = `
                    <img src="https://media.tenor.com/gUiu1zyxfzYAAAAi/bear-kiss-bear-kisses.gif" alt="bear-Kissing" />
                    <div class='text'>Yayyy !!!</div>
                    <br/>
                    <br/>
                    <br/>
                    <div class="card_container">
                      <div class="envelope"></div>
                      <div class="card">
                        <h1 class="message">Vasson bahr dil ho gaya<br/>Koi chalda na chara hai<br/>Tere bina na guzara hai<br/><br/>I Love You!</h1>
                        <div class="heart"></div>
                      </div>
                      <div class="cover"></div>
                      <div class="lid"></div>
                      <div class="shadow"></div>
                    </div>

                    <br/>
                    <br/>
                    <br/>
                    <br/>
                    <br/>
                    <div>
                      <a class="more-stuff" href="./rose/index.html">Rose</a>
                      <br/>
                      <a class="more-stuff" href="./chocolate/index.html">Chocolate</a>
                      <br/>
                      <a class="more-stuff" href="./teddy_bear/index.html">Teddy Bear</a>
                    </div>
                `;
        } else {
          root.innerHTML = `
                    <img class='kiss' src="https://media1.tenor.com/m/al4a1pG1f8YAAAAC/jump-bear.gif" alt="bear with heart" />
                    <div class='text'>Dear Onshi, Will you be my Valentine forever? 🌹</div>
                    <div class='both-Button'>
                        <button class='yesButton' style="padding: 5px;font-size: ${yesButtonSize}px; background-color: rgb(248, 229, 89)" onclick="handleYesClick()">
                            Yes 🙈
                        </button>
                        <button class='NoButton' onclick="handleNoClick()">
                            ${getNoButtonText()}
                        </button>
                    </div>
                `;
        }
      }

      render();
    </script>
  </body>
</html>
